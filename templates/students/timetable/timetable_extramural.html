<table border="1" class="timetable table-responsive">
    <tr>
        <th rowspan="2" width="60">День</th>
        <th rowspan="2">Время</th>
        <th colspan="2">{{ group_name }}</th>
    </tr>
    <tr class="subhead">
        <th style="background: #a4e2ff">Название предмета</th>
        <th style="background: #a4e2ff">Ауд.</th>
    </tr>
    {% for item in schedule %}
        <tr class="{{ loop.cycle('odd', 'even') }}" style="border-bottom: rgba(0,0,0,0.08) solid 1px;">
            {% if item.date.startswith('По договоренности') or item.date == '' %}
                <td colspan="2">По договорённости</td>
            {% else %}
                <td>{{ item.date }}</td>
                <td>{{ item.time | replace(' - ', '&nbsp;-&nbsp;') | replace(' ', '<br>') | safe }}</td>
            {% endif %}
            <td>{{ item.name }}<br>
                {% for teacher in item.teachers.all() %}
                    {% if teacher.staff %}
                        <a href="{{ teacher.get_absolute_url() }}">{{ teacher }}</a>
                    {% else %}
                        {{ teacher }}
                    {% endif %}
                {% endfor %}
            </td>
            <td>{{ item.place }}</td>
        </tr>
    {% else %}
        <tr>
            {% if session %}
                <td colspan="4">На данный момент расписание отсутствует</td>
            {% else %}
                <td colspan="4">На данной неделе занятия по расписанию отсутствуют</td>
            {% endif %}
        </tr>
    {% endfor %}
</table>