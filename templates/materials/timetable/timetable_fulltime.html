<table border="1" class="timetable table-responsive">
    <tr>
        <th rowspan="2" width="60">День</th>
        <th rowspan="2">Время</th>
        <th colspan="2">{{ group_name }}</th>
    </tr>
    <tr class="subhead">
        <th style="background: #a4e2ff">Название предмета</th>
        <th style="background: #a4e2ff">Ауд.</th>
    </tr>
    {% for date in schedule.keys() %}
        <tr class="{{ loop.cycle('odd', 'even') }}" style="border-bottom: rgba(0,0,0,0.08) solid 1px;">
            {% if date %}
                <td rowspan="{{ schedule[date] | length + 1 }}">
                    {{ date.date }}<br>{{ date.week_day }}
                </td>
            {% else %}
                <td class="rotated" rowspan="{{ schedule[date] | length + 1 }}">
                    По&nbsp;договорённости с&nbsp;преподавателем
                </td>
            {% endif %}
            {% for item in schedule[date] %}
                <tr>
                    <td>{{ item.time }}</td>
                    <td>{{ item.name }} {{ item.item_type }}<br>
                        {% for teacher in item.teachers.all() %}
                            {% if teacher.staff %}
                                <a href="{{ teacher.get_absolute_url() }}">{{ teacher }}</a>
                            {% else %}
                                {{ teacher }}
                            {% endif %}
                        {% endfor %}
                    </td>
                    <td>{{ item.place }}</td>
                </tr>
            {% endfor %}
    {% else %}
        <tr>
            {% if session %}
                <td colspan="4">На данный момент расписание отсутствует</td>
            {% else %}
                <td colspan="4">На данной неделе занятия по расписанию отсутствуют</td>
            {% endif %}
        </tr>
    {% endfor %}
</table>
